## ðŸ§  åŸºæœ¬æ¦‚å¿µ
- `WATCH` ç”¨äºŽåœ¨æ‰§è¡Œäº‹åŠ¡å‰â€œç›‘è§†â€ä¸€ä¸ªæˆ–å¤šä¸ªé”®ã€‚
- å¦‚æžœåœ¨äº‹åŠ¡æ‰§è¡Œå‰ï¼Œè¿™äº›é”®ä¸­çš„ä»»æ„ä¸€ä¸ªè¢«ä¿®æ”¹ï¼ˆåŒ…æ‹¬è¢«åˆ é™¤ï¼‰ï¼Œåˆ™ `EXEC` æ‰§è¡Œäº‹åŠ¡æ—¶ä¼š **å¤±è´¥ï¼ˆè¿”å›ž nullï¼‰**ã€‚
- è¿™æ˜¯ä¸€ç§å…¸åž‹çš„ **ä¹è§‚é”** å®žçŽ°æ–¹å¼ã€‚

## ðŸ› ï¸ ä½¿ç”¨æµç¨‹

1. ä½¿ç”¨ `WATCH` ç›‘è§†ä¸€ä¸ªæˆ–å¤šä¸ªé”®ã€‚
2. ä½¿ç”¨ `MULTI` å¼€å¯äº‹åŠ¡ã€‚
3. æ‰§è¡Œå¤šä¸ª Redis å‘½ä»¤ï¼ˆè¿™äº›å‘½ä»¤ä¼šè¢«ç¼“å­˜ï¼‰ã€‚
4. ä½¿ç”¨ `EXEC` æäº¤äº‹åŠ¡ï¼š
   - è‹¥ç›‘è§†çš„é”®åœ¨æ­¤æœŸé—´**æ²¡æœ‰å˜åŒ–**ï¼Œåˆ™äº‹åŠ¡æˆåŠŸæ‰§è¡Œã€‚
   - è‹¥ç›‘è§†çš„é”®**å‘ç”Ÿå˜åŒ–**ï¼Œåˆ™äº‹åŠ¡å¤±è´¥ï¼ˆä¸æ‰§è¡Œä»»ä½•å‘½ä»¤ï¼‰ã€‚

## åŒæ—¶ç›‘æµ‹å¤šä¸ªwatchç»“æžœ

å‡è®¾æˆ‘ä»¬æœ‰å®¢æˆ·ç«¯1 æ­£åœ¨watch num:a num:bï¼Œå®¢æˆ·ç«¯2 åœ¨å®¢æˆ·ç«¯1 watchåŽä¿®æ”¹äº† num:a çš„å€¼ï¼Œ
è¿™æ—¶å€™æˆ‘ä»¬å¯¹num:a num:bçš„ä¿®æ”¹éƒ½ä¼šä¸æˆåŠŸ
```
## å®¢æˆ·ç«¯1æ“ä½œ
127.0.0.1:6379> GET num:a
"100"
127.0.0.1:6379> GET num:b
"200"
127.0.0.1:6379> WATCH num:a num:b
OK
127.0.0.1:6379> MULTI
OK
127.0.0.1:6379(TX)> DECR num:b
QUEUED
127.0.0.1:6379(TX)> DECR num:a
QUEUED
127.0.0.1:6379(TX)> EXEC
(nil)
127.0.0.1:6379> GET num:a
"300"
127.0.0.1:6379> GET num:b
"200"
```

```
## å®¢æˆ·ç«¯1æ“ä½œ å‘ç”Ÿåœ¨ WATCH num:a num:bä¹‹åŽ
127.0.0.1:6379> SET num:a 300
OK
```