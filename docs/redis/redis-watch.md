## 🧠 基本概念
- `WATCH` 用于在执行事务前“监视”一个或多个键。
- 如果在事务执行前，这些键中的任意一个被修改（包括被删除），则 `EXEC` 执行事务时会 **失败（返回 null）**。
- 这是一种典型的 **乐观锁** 实现方式。

## 🛠️ 使用流程

1. 使用 `WATCH` 监视一个或多个键。
2. 使用 `MULTI` 开启事务。
3. 执行多个 Redis 命令（这些命令会被缓存）。
4. 使用 `EXEC` 提交事务：
   - 若监视的键在此期间**没有变化**，则事务成功执行。
   - 若监视的键**发生变化**，则事务失败（不执行任何命令）。

## 同时监测多个watch结果

假设我们有客户端1 正在watch num:a num:b，客户端2 在客户端1 watch后修改了 num:a 的值，
这时候我们对num:a num:b的修改都会不成功
```
## 客户端1操作
127.0.0.1:6379> GET num:a
"100"
127.0.0.1:6379> GET num:b
"200"
127.0.0.1:6379> WATCH num:a num:b
OK
127.0.0.1:6379> MULTI
OK
127.0.0.1:6379(TX)> DECR num:b
QUEUED
127.0.0.1:6379(TX)> DECR num:a
QUEUED
127.0.0.1:6379(TX)> EXEC
(nil)
127.0.0.1:6379> GET num:a
"300"
127.0.0.1:6379> GET num:b
"200"
```

```
## 客户端1操作 发生在 WATCH num:a num:b之后
127.0.0.1:6379> SET num:a 300
OK
```