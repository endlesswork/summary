## 🧠 DMA 是什么？

**DMA（Direct Memory Access，直接内存访问）** 是一种允许外部设备（如磁盘、网卡、显卡等）直接访问计算机内存的技术，而不需要 CPU 介入。其目的是通过绕过 CPU 来 **减少 CPU 的负担，提高数据传输效率**。


## 🚀 为什么需要 DMA？

如果没有 DMA，每次设备（如磁盘、网卡）要读写内存，都得让 CPU 来“搬数据”，流程如下：

```text
[设备] ⇄ [CPU] ⇄ [内存]
```

这样会导致：

❌ CPU 被大量占用，性能下降

❌ 数据量大时 CPU 成为瓶颈

而 DMA 的出现就是为了解决这个问题。

✅ 有了 DMA，数据传输流程变成

```text
[设备] ⇄ [DMA 控制器] ⇄ [内存]
```

CPU 只需要：

发起 DMA 请求（告诉 DMA：从哪读/写、读多少）

然后就可以去干别的事，DMA 异步地 完成传输

等 DMA 传输完成，再通过 中断通知 CPU，完全不需要 CPU 参与整个搬运过程。

## 📦 举个例子（磁盘读取文件）

没有 DMA：

1. CPU 读取磁盘数据到寄存器

2. 再写入内存

3. 数据量大时，CPU 忙得飞起

使用 DMA：

1. CPU 发命令给 DMA 控制器

2. DMA 控制器把磁盘数据直接写入内存

3. 完成后通知 CPU：“搞定了！”


## 🧩 DMA 在哪些场景用得多？

1. 🧾 磁盘 I/O（文件系统）

2. 🌐 网卡数据包收发（零拷贝场景）

3. 📺 显卡渲染图像

4. 📡 嵌入式设备/外设通信（UART、SPI、I²C）