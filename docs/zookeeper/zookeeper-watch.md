# 👁 ZooKeeper Watch 机制

ZooKeeper 提供了一种 **数据变更通知机制** —— Watch（观察），可以让客户端在节点发生变化时**收到通知**，实现**轻量级的事件监听器**功能。

---

## 📌 Watch 特点

- **一次性触发**：触发后就失效，需重新注册
- **客户端注册，服务端通知**
- **轻量非可靠**：只保证“尽量通知一次”，不保证一定通知、顺序通知


## 🔄 Watch 工作原理

1. 客户端调用某个带 `watch` 参数的 API（如 `getData(path, true)`）
2. 服务端在对应节点上注册监听器
3. 当节点发生以下事件之一，触发 Watch 回调：
   - 节点创建
   - 节点删除
   - 节点数据变更
   - 子节点列表变化
4. 客户端收到通知，执行回调函数
5. 该 Watch 自动失效，如需再次监听需重新注册